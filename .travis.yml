os:
  - linux
addons:
  chrome: stable
language: node_js
node_js:
  - "8"
  - "10"
  - "12"
sudo: required
install:
  - yarn install
  - yarn build
  - yarn lint
  - yarn add $TYPESCRIPT
after_success:
  # Lint markdown files. The latest remark works only on TypeScript 3.
  # This hack aims to avoid that adding the remark packages to `package.json` may cause a `tsc` failure.
  - set -e
  - |
    if [ "$TYPESCRIPT" == "typescript@3.5.1" ]; then yarn run lint:md; fi
  - set +e
env:
  - TYPESCRIPT=typescript@3.5.1
  - TYPESCRIPT=typescript@3.4.4
  - TYPESCRIPT=typescript@next
  - TYPESCRIPT=typescript@3.3.3
  - TYPESCRIPT=typescript@3.2.1
  - TYPESCRIPT=typescript@3.1.1
  - TYPESCRIPT=typescript@3.0.1
  - TYPESCRIPT=typescript@2.9.2
  - TYPESCRIPT=typescript@2.8.1
  - TYPESCRIPT=typescript@2.7.1
  - TYPESCRIPT=typescript@2.6.1
  - TYPESCRIPT=typescript@2.5.2
  - TYPESCRIPT=typescript@2.4.1
